{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/professional-portfolio/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\nconst globalForPrisma = globalThis as unknown as { prisma: PrismaClient | undefined }\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: [\"error\", \"warn\"],\r\n  })\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6HAAA,CAAA,eAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/professional-portfolio/app/api/feedback/moderation/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { prisma } from \"@/lib/prisma\"\r\n\r\nfunction isAuthorized(req: Request) {\r\n  const header = req.headers.get(\"authorization\") || \"\"\r\n  if (!header.startsWith(\"Basic \")) return false\r\n  const creds = Buffer.from(header.replace(\"Basic \", \"\"), \"base64\").toString()\r\n  const [user, pass] = creds.split(\":\")\r\n  return user === process.env.ADMIN_USER && pass === process.env.ADMIN_PASSWORD\r\n}\r\n\r\nexport async function GET(req: Request) {\r\n  if (!isAuthorized(req)) return new NextResponse(\"Unauthorized\", { status: 401 })\r\n  try {\r\n    const feedback = await prisma.feedback.findMany({ orderBy: { createdAt: \"desc\" } })\r\n    return NextResponse.json(feedback)\r\n  } catch (e) {\r\n    console.error(\"Database error in moderation GET:\", e)\r\n    return NextResponse.json([])\r\n  }\r\n}\r\n\r\nexport async function PATCH(req: Request) {\r\n  if (!isAuthorized(req)) return new NextResponse(\"Unauthorized\", { status: 401 })\r\n  try {\r\n    const body = await req.json()\r\n    await prisma.feedback.update({ where: { id: body.id }, data: { approved: true } })\r\n    return NextResponse.json({ success: true })\r\n  } catch (e) {\r\n    console.error(\"Database error in moderation PATCH:\", e)\r\n    return NextResponse.json({ success: false, error: \"Database unavailable\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  if (!isAuthorized(req)) return new NextResponse(\"Unauthorized\", { status: 401 })\r\n  try {\r\n    const { searchParams } = new URL(req.url)\r\n    const id = searchParams.get(\"id\") as string\r\n    await prisma.feedback.delete({ where: { id } })\r\n    return NextResponse.json({ success: true })\r\n  } catch (e) {\r\n    console.error(\"Database error in moderation DELETE:\", e)\r\n    return NextResponse.json({ success: false, error: \"Database unavailable\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAEA,SAAS,aAAa,GAAY;IAChC,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;IACnD,IAAI,CAAC,OAAO,UAAU,CAAC,WAAW,OAAO;IACzC,MAAM,QAAQ,OAAO,IAAI,CAAC,OAAO,OAAO,CAAC,UAAU,KAAK,UAAU,QAAQ;IAC1E,MAAM,CAAC,MAAM,KAAK,GAAG,MAAM,KAAK,CAAC;IACjC,OAAO,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI,SAAS,QAAQ,GAAG,CAAC,cAAc;AAC/E;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI,CAAC,aAAa,MAAM,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,gBAAgB;QAAE,QAAQ;IAAI;IAC9E,IAAI;QACF,MAAM,WAAW,MAAM,+GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAAE,SAAS;gBAAE,WAAW;YAAO;QAAE;QACjF,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,EAAE;IAC7B;AACF;AAEO,eAAe,MAAM,GAAY;IACtC,IAAI,CAAC,aAAa,MAAM,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,gBAAgB;QAAE,QAAQ;IAAI;IAC9E,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,+GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAAE,OAAO;gBAAE,IAAI,KAAK,EAAE;YAAC;YAAG,MAAM;gBAAE,UAAU;YAAK;QAAE;QAChF,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5F;AACF;AAEO,eAAe,OAAO,GAAY;IACvC,IAAI,CAAC,aAAa,MAAM,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,gBAAgB;QAAE,QAAQ;IAAI;IAC9E,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,KAAK,aAAa,GAAG,CAAC;QAC5B,MAAM,+GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAAE,OAAO;gBAAE;YAAG;QAAE;QAC7C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5F;AACF","debugId":null}}]
}